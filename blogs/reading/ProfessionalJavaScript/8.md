---
title: JS高程 | 第8章_BOM
date: 2021-2-24
tags:
  - 读书笔记
  - javascript
categories:
  - 读书笔记
---

# 第 8 章\_BOM

BOM(Browser Object Model)，浏览器对象模型

BOM 提供了很多对象，用于访问浏览器的功能，这些功能与任何网页内容无关。

## 1、window 对象

window 是 BOM 的核心对象，表示浏览器的一个实例。

**双重角色**：既是通过 js 访问浏览器窗口的一个接口；又是 ECMAScript 规定的 Global 对象。

#### 1.1 全局作用域

- 所有在全局作用域中声明的变量、函数都会变成 window 对象的属性和方法。
- 定义全局变量与在 window 对象上直接定义属性的区别：全局变量不能通过 delete 操作符删除，而直接在 window 对象上的定义的属性可以。
  - 全局变量不能通过 delete 操作符删除**原因**：使用 var 语句添加的 window 属性有一个名为 [[Configurable]] 的特性，这个特性的值被设置为 false，因此这样定义的属性不可以通过 delete 操作符删除。
- 尝试访问未声明的变量会抛出错误，但是通过查询 window 对象，可以知道某个可能未声明的变量是否存在。

#### 1.2 窗口关系及框架

- 如果页面中包含框架，则每个框架都拥有自己的 window 对象，通过以下几种方法访问相应的 window 对象。
  - window.frames[序号]
  - window.frames[name]
  - top.frames[序号] // top 对象始终指向最高（最外）层的框架。
  - top.frames[name]
  - frames[序号]
  - frames[name]
- parent 对象始终指向当前框架的直接上层框架。
- self 对象始终指向 window。
- 所有这些对象都是 window 对象的属性。

#### 1.3 窗口位置

确定 window 对象位置的属性

- screenLeft // 窗口相对于屏幕左边
- screenTop // 窗口相对于屏幕上边
- screenX
- screenY

修改 window 对象位置的方法

- moveTo() // 接收的是新位置的 x 和 y 坐标值
- moveBy() // 接收的是在水平和垂直方向上移动的像素数

#### 1.4 窗口大小

确定一个窗口的大小

- innerWidth、innerHeight // 该容器中页面视图区的大小（减去边框宽度）
- outerWidth 、outerHeight // 浏览器窗口本身的尺寸

调整浏览器窗口的大小

- resizeTo() // 接收浏览器窗口的新宽度和新高度
- resizeBy() // 接收新窗口与原窗口的宽度和高度之差

#### 1.5 导航和打开窗口

- window.open() // 导航到一个特定的 URL 或 打开一个新的浏览器窗口
  - 接收 4 个参数：要加载的 URL、窗口目标、一个特性字符串以及一个表示新页面是否取代浏览器历史记录中当前加载页面的布尔值
  - 通常只须传递第一个参数，最后一个参数只在不打开新窗口的情况下使用。
  - 第三个参数是一个逗号分隔的设置字符串，表示在新窗口中都显示哪些特性。
  - 该方法返回一个指向新窗口的引用。

#### 1.6 间歇调用和超时调用

JavaScript 是单线程语言，但它允许通过设置**超时值**和**间歇时间值**来调度代码在特定的时刻执行。

- 超时调用 setTimeout()

  - 它接受两个参数：要执行的代码（字符串或函数）和以毫秒表示的时间（即在执行代码前需要等待多少毫秒）。

  - 第二个参数告诉 js 再过多长时间把当前任务添加到队列中。
    - 该方法会返回一个超时调用 ID。clearTimeout() 方法，将相应的超时调用 ID 作为参数传递给它，来取消超时调用。

- 间歇调用 setInterval()
  - 它接受两个参数：要执行的代码（字符串或函数）和每次执行之前需要等待的毫秒数。
  - 该方法会返回一个间歇调用 ID。clearInterval() 方法，传入相应的间歇调用 ID，来取消间歇调用。
  - 取消间歇调用的重要性要远远高于取消超时调用。

#### 1.7 系统对话框

调用系统对话框向用户显示消息。

- alert()
- confirm()
- prompt()

## 2、location 对象

location 是最有用的 BOM 对象之一。它提供了与当前窗口中加载的文档有关的信息，还提供了一些**导航**功能。

它既是 window 对象的属性，也是 document 对象的属性。

location 将 URL 解析为独立的片段，让开发人员可以通过不同的属性访问这些片段。如，hash、host、hostname、href、pathname、port、protocol、search

#### 2.1 查询字符串参数

- 创建 getQueryStringArgs() 函数，用以解析查询字符串。

#### 2.2 位置操作

- assign(URL)
- location.href = URL
- 修改 location 对象的其他属性
- 当通过上述任何一种方式修改 URL 之后，浏览器的历史记录中就会生成一条新记录，因此用户通过单击“后退”按钮都会导航到前一个页面。
- replace(URL) // 不会在历史记录中生成新记录
- reload() // 重新加载（有可能从缓存中加载） reload(true); // 重新加载（从服务器重新加载）

## 3、navigator 对象

navigator 对象的属性通常用于检测显示网页的**浏览器**类型。

#### 3.1 检测插件

非 IE 浏览器

- plugins 数组，该数组中的每一项都包含下列属性
  - name：插件的名字
  - description：插件的描述
  - filename：插件的文件名
  - length：插件所处理的 MIME 类型数量

IE 浏览器

- 使用专有的 ActiveXObject 类型，并尝试创建一个特定插件的实例。接收一个 COM 标识符。

#### 3.2 注册处理程序

- registerContentHandler() // 接收三个参数：要处理的 MIME 类型、可以处理该 MIME 类型的页面的 URL 以及应用程序的名称
- registerProtocolHandler() // 接收三个参数：要处理的协议（例如，mailto 或 ftp）、处理该协议的页面的 URL 和应用程序的名称

## 4、screen 对象

screen 对象在编程中用处不大。只用来表明客户端的能力，其中包括浏览器窗口外部的显示器的信息，如像素宽度和高度等。

保存着与**客户端显示器**有关的信息，这些信息一般只用于站点分析。

## 5、history 对象

history 对象保存着用户上网的**历史记录**，从窗口被打开的那一刻算起。

- go()
  - 接受一个参数，表示向后或向前跳转的页面数的一个整数值。负数-后退，正数-前进。
  - 也可以传递一个字符串参数。此时浏览器会跳转到历史记录中包含该字符串的第一个位置——可能后退，也可能前进，具体要看哪个位置最近。
- back() // 后退一页
- forward() // 前进一页
- length // 保存着历史记录的数量
  - history.length == 0 // 检测当前页面是不是用户历史记录中的第一个页面
