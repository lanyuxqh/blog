---
title: JS高程 | 第5章_引用类型
date: 2021-4-7
tags:
  - 读书笔记
  - javascript
categories:
  - 读书笔记
---

# 第 5 章\_引用类型

> 在 ECMAScript 中，引用类型是一种数据结构，用于将数据和功能组织在一起。

- 引用类型有时候也被称为对象定义，因为它们描述的是一类对象所具有的属性和方法。
- 虽然引用类型与类看起来相似，但它们并不是相同的概念。
- 对象是某个特定引用类型的实例。

## 5.1 Object 类型

- 创建 Object 实例
  - `new Object()`
  - 对象字面量

## 5.2 Array 类型

- ECMAScript 数组的每一项可以保存任何类型的数据。
- ECMAScript 数组的大小是可以动态调整。
- 创建数组
  - `new Array()`
  - `Array(3)`
  - 数组字面量
- 数组的 length 属性很有特点——它不是只读的。因此，通过设置这个属性，可以从数组的末尾移除项或向数组中添加新项。

### 5.2.1 检测数组

- `Array.isArray()` ：最终确定某个值到底是不是数组，而不管它是在哪个全局执行环境中创建的。

### 5.2.2 转换方法

- 调用数组的 toString() 方法会返回由数组中每个值的字符串形式拼接而成的一个以逗号分隔的字符串。
- 调用 valueOf() 返回的还是数组。
- 调用数组的 toLocaleString() 方法时，它也会创建一个数组值的以逗号分隔的字符串。与前两个方法唯一的不同之处在于，这一次为了取得每一项的值，调用的是每一项的 toLocaleString() 方法，而不是 toString() 方法。
- join() 方法只接收一个参数，即用作分隔符的字符串，然后返回包含所有数组项的字符串。
- 如果数组中的某一项的值是 null 或者 undefined，那么该值在 join()、toLocaleString()、toString()和 valueOf()方法返回的结果中以空字符串表示。

### 5.2.3 栈方法

- push() 方法可以接收任意数量的参数，把它们逐个添加到数组末尾，并返回修改后数组的长度。
- pop() 方法则从数组末尾移除最后一项，减少数组的 length 值，然后返回移除的项。

### 5.2.4 队列方法

- shift() 方法能够移除数组中的第一个项并返回该项，同时将数组长度减 1。

- unshift() 方法能在数组前端添加任意个项并返回新数组的长度。

### 5.2.5 重排序方法

- reverse() 方法会反转数组项的顺序。
- sort() 方法排序，默认升序，会调用每个数组项的 toString() 转型方法，然后比较得到的字符。可以接收一个比较函数作为参数。（正数要交换）

### 5.2.6 操作方法

- concat() 方法可以基于当前数组中的所有项创建一个新数组。
- slice() 方法能够基于当前数组中的一或多个项创建一个新数组。
- splice() 方法
  - 删除：可以删除任意数量的项，只需指定 2 个参数：要删除的第一项的位置和要删除的项数。
  - 插入：可以向指定位置插入任意数量的项，只需提供 3 个参数：起始位置、0（要删除的项数）和要插入的项。如果要插入多个项，可以再传入第四、第五，以至任意多个项。
  - 替换：可以向指定位置插入任意数量的项，且同时删除任意数量的项，只需指定 3 个参数：起始位置、要删除的项数和要插入的任意数量的项。插入的项数不必与删除的项数相等。
  - splice() 方法始终都会返回一个数组，该数组中包含从原始数组中删除的项（如果没有删除任何项，则返回一个空数组）。

### 5.2.7 位置方法

- indexOf() 方法从数组的开头（位置 0）开始向后查找。接收两个参数：要查找的项和（可选的）表示查找起点位置的索引。
- lastIndexOf() 方法则从数组的末尾开始向前查找。接收两个参数：要查找的项和（可选的）表示查找起点位置的索引。

### 5.2.8 迭代方法

- every()：对数组中的每一项运行给定函数，如果该函数对每一项都返回 true，则返回 true。
- filter()：对数组中的每一项运行给定函数，返回该函数会返回 true 的项组成的数组。
- forEach()：对数组中的每一项运行给定函数。这个方法没有返回值。
- map()：对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。
- some()：对数组中的每一项运行给定函数，如果该函数对任一项返回 true，则返回 true。
- 以上方法都不会修改数组中的包含的值。

### 5.2.9 归并方法

- reduce()：迭代数组的所有项，然后构建一个最终返回的值。
- reduceRight() 则从数组的最后一项开始，向前遍历到第一项。

## 5.3 Date 类型

- 创建
  - new Date()
  - Date.parse()
  - Date.UTC()
  - Data.now() //返回表示调用这个方法时的日期和时间的毫秒数

### 5.3.1 继承的方法

- toLocaleString() 方法会按照与浏览器设置的地区相适应的格式返回日期和时间。
- toString() 方法则通常返回带有时区信息的日期和时间。
- valueOf() 方法则根本不返回字符串，而是返回日期的毫秒表示。可以方便使用比较操作符（小于或大于）来比较日期值。

### 5.3.2 日期格式化方法

Date 类型还有一些专门用于将日期格式化为字符串的方法，这些方法如下。

- toDateString()——以特定于实现的格式显示星期几、月、日和年；
- toTimeString()——以特定于实现的格式显示时、分、秒和时区；
- toLocaleDateString()——以特定于地区的格式显示星期几、月、日和年；
- toLocaleTimeString()——以特定于实现的格式显示时、分、秒；
- toUTCString()——以特定于实现的格式完整的 UTC 日期。

与 toLocaleString()和 toString()方法一样，以上这些字符串格式方法的输出也是因浏览器而异的，因此没有哪一个方法能够用来在用户界面中显示一致的日期信息。

### 5.3.3 日期/时间组件方法

直接取得和设置日期值中特定部分的方法。

## 5.4 RegExp 类型

- 创建

  - var expression = / pattern / flags ;
  - new RegExp("[bc]at", "i")；

- flags
  - g：表示全局（global）模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止；
  - i：表示不区分大小写（case-insensitive）模式，即在确定匹配项时忽略模式与字符串的大小写；
  - m：表示多行（multiline）模式，即在到达一行文本末尾时还会继续查找下一行中是否存在与模式匹配的项。

### 5.4.1 RegExp 实例属性

RegExp 的每个实例都具有下列属性，通过这些属性可以取得有关模式的各种信息。

- global：布尔值，表示是否设置了 g 标志。
- ignoreCase：布尔值，表示是否设置了 i 标志。
- lastIndex：整数，表示开始搜索下一个匹配项的字符位置，从 0 算起。
- multiline：布尔值，表示是否设置了 m 标志。
- source：正则表达式的字符串表示，按照字面量形式而非传入构造函数中的字符串模式返回。

### 5.4.2 RegExp 实例方法

- exec() 方法接受一个参数，即要应用模式的字符串，然后返回包含第一个匹配项信息的数组；或者在没有匹配项的情况下返回 null。
  - 返回的数组虽然是 Array 的实例，但包含两个额外的属性：index 和 input。其中，index 表示匹配项在字符串中的位置，而 input 表示应用正则表达式的字符串。
  - 即使在模式中设置了全局标志（g），它每次也只会返回一个匹配项。
  - 在不设置全局标志的情况下，在同一个字符串上多次调用 exec()将始终返回第一个匹配项的信息。而在设置全局标志的情况下，每次调用 exec()则都会在字符串中继续查找新匹配项。
- test() 方法接受一个字符串参数。在模式与该参数匹配的情况下返回 true；否则，返回 false。
- RegExp 实例继承的 toLocaleString()和 toString()方法都会返回正则表达式的字面量。

## 5.5 Function 类型

- 函数实际上是对象。每个函数都是 Function 类型的实例，而且都与其他引用类型一样具有属性和方法。
- 函数名实际上也是一个指向函数对象的指针，不会与某个函数绑定。

### 5.5.1 没有重载（深入理解）

- 将函数名想象为指针，也有助于理解为什么 ECMAScript 中没有函数重载的概念。

### 5.5.2 函数声明与函数表达式

- 解析器会率先读取函数声明，并使其在执行任何代码之前可用（可以访问）；至于函数表达式，则必须等到解析器执行到它所在的代码行，才会真正被解释执行。
- 除了什么时候可以通过变量访问函数这一点区别之外，函数声明与函数表达式的语法其实是等价的。

### 5.5.3 作为值的函数

- 因为 ECMAScript 中的函数名本身就是变量，所以函数也可以作为值来使用。也就是说，不仅可以像传递参数一样把一个函数传递给另一个函数，而且可以将一个函数作为另一个函数的结果返回。

### 5.5.4 函数内部属性

- arguments 的主要用途是保存函数参数。
  - callee 是一个指针，指向拥有这个 arguments 对象的函数。
- this 引用的是函数据以执行的环境对象。
- caller 保存着调用当前函数的函数的引用，如果是在全局作用域中调用当前函数，它的值为 null。

### 5.5.5 函数属性和方法

- 每个函数都包含两个属性：length 和 prototype。
- 每个函数都包含三个非继承而来的方法：apply() 和 call() 和 bind()。
- 每个函数继承的 toLocaleString() 和 toString() 方法始终都返回函数的代码。valueOf() 方法同样也只返回函数代码。

## 5.6 基本包装类型

### 5.6.1 Boolean 类型

- 布尔表达式中的所有对象都会被转换为 true。
- 建议是永远不要使用 Boolean 对象。

### 5.6.2 Number 类型

Number 类型还提供了一些用于将数值格式化为字符串的方法。

- toFixed()方法会按照指定的小数位返回数值的字符串表示。
- toExponential()，该方法返回以指数表示法（也称 e 表示法）表示的数值的字符串形式。

### 5.6.3 String 类型

- charAt() 方法以单字符字符串的形式返回给定位置的那个字符。
- concat()，用于将一或多个字符串拼接起来，返回拼接得到的新字符串。
- slice()和 substring()的第二个参数指定的是子字符串最后一个字符后面的位置。而 substr()的第二个参数指定的则是返回的字符个数。
- indexOf()和 lastIndexOf()。这两个方法都是从一个字符串中搜索给定的子字符串，然后返子字符串的位置（如果没有找到该子字符串，则返回-1）。
- trim()方法会创建一个字符串的副本，删除前置及后缀的所有空格，然后返回结果。
- toLowerCase()和 toUpperCase()
- match()方法只接受一个参数，要么是一个正则表达式，要么是一个 RegExp 对象。
- search()
- replace()
- split()
- localeCompare()
- fromCharCode()

## 5.7 单体内置对象

> ECMA-262 对内置对象的定义是：“由 ECMAScript 实现提供的、不依赖于宿主环境的对象，这些对象在 ECMAScript 程序执行之前就已经存在了。

### 5.7.1 Global 对象

- URI 编码方法
  - encodeURI(）
  - encodeURIComponent(）
  - decodeURI(）
  - decodeURIComponent(）
- eval()方法
- Global 对象的属性
- window 对象

### 5.7.2 Math 对象

- Math 对象的属性
- min()和 max()方法
- 舍入方法
  - Math.ceil()执行向上舍入，即它总是将数值向上舍入为最接近的整数；
  - Math.floor()执行向下舍入，即它总是将数值向下舍入为最接近的整数；
  - Math.round()执行标准舍入，即它总是将数值四舍五入为最接近的整数（这也是我们在数学课上学到的舍入规则）。
- random()方法
